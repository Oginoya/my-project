<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>モーダルウィンドウのサンプルコード</title>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>
    <h1>モーダルウィンドウのサンプルコード</h1>



    <div class="container">
      <p>このソースコードは、モーダルウィンドウを操作するための関数modalFuncです。以下、ソースコードのレビューを行います。</p>

        変数recordXとrecordYは、スクロール位置を記録するための変数です。
        rootElmとbodyElmは、ドキュメント要素とボディ要素を表す変数です。
        showModalIdは、表示対象のIDを生成するための変数です。
        $(showModalId).lengthをチェックして、表示対象のIDが存在するかどうかを確認しています。
        .overlayの存在をチェックして、オーバーレイが既に存在する場合は処理を終了し、存在しない場合は新しいオーバーレイを生成します。
        オーバーレイとモーダル本体を表示するために、.overlayとshowModalIdにisDisplayクラスを追加します。
        calcPosi関数は、モーダルの位置を調整するための関数です。
        outerHeightは、ブラウザ全体の高さ（アドレスバーを含む）を表します。
        innerHeightは、ブラウザの表示領域の高さを表します。
        modalHeightは、モーダルの高さ（余白を含む）を表します。
        heightDiffは、モーダルの高さと表示領域の高さの差を表します。
        heightDiffが0より大きい場合、モーダルの高さが表示領域より大きいことを意味します。この場合、モーダルの位置を固定せずに、画面上部に表示します。
        heightDiffが0以下の場合、モーダルの高さが表示領域内に収まることを意味します。この場合、モーダルの位置を画面中央に設定します。
        calcPosi関数は、初期実行とウィンドウのリサイズ時に呼び出されます。
        $('.isCloseModal, .overlay').on('click', ...)は、モーダルウィンドウを閉じるためのイベントハンドラです。
        モーダルを閉じる際には、isDisplayクラスを削除し、オーバーレイを削除し、モーダルのスタイルをリセットします。
        モーダルを開いた時のスクロール位置に戻すために、window.scrollToを使用します。
        showModalIdを初期化するために、nullを代入しています。
        最後のelseブロックでは、表示対象のIDが存在しない場合にfalseを返しています。
        このソースコードは、モーダルウィンドウを制御するための基本的な機能を提供しています。以下はいくつかの改善点です。
        オーバーレイの生成と表示対象IDの存在チェックを分けることで、オーバーレイが複数回生成されるのを防げます。
        calcPosi関数内での$(showModalId)の複数回の参照を減らすために、変数にキャッシュして再利用することができます。
        スクロール位置の記録と復元は、モーダルウィンドウの開閉に対して適切な位置で行われているように見えますが、ユースケースによっては改善の余地があるかもしれません。
        以上がソースコードのレビューと改善点の提案です。特定の要件や目的に基づいてカスタマイズすることもできますが、現在の情報だけで詳細な改善点を提案するのは難しいです。</p>
    </div>
    <!-- /.container -->


    <div class="container">
      <p id="test" class="modal-open modal-trigger" data-modal="test1">モーダルを開く</p>
    </div>
    <!-- /.container -->


    <div class="container">
      <p>このソースコードは、モーダルウィンドウを操作するための関数modalFuncです。以下、ソースコードのレビューを行います。</p>

        変数recordXとrecordYは、スクロール位置を記録するための変数です。
        rootElmとbodyElmは、ドキュメント要素とボディ要素を表す変数です。
        showModalIdは、表示対象のIDを生成するための変数です。
        $(showModalId).lengthをチェックして、表示対象のIDが存在するかどうかを確認しています。
        .overlayの存在をチェックして、オーバーレイが既に存在する場合は処理を終了し、存在しない場合は新しいオーバーレイを生成します。
        オーバーレイとモーダル本体を表示するために、.overlayとshowModalIdにisDisplayクラスを追加します。
        calcPosi関数は、モーダルの位置を調整するための関数です。
        outerHeightは、ブラウザ全体の高さ（アドレスバーを含む）を表します。
        innerHeightは、ブラウザの表示領域の高さを表します。
        modalHeightは、モーダルの高さ（余白を含む）を表します。
        heightDiffは、モーダルの高さと表示領域の高さの差を表します。
        heightDiffが0より大きい場合、モーダルの高さが表示領域より大きいことを意味します。この場合、モーダルの位置を固定せずに、画面上部に表示します。
        heightDiffが0以下の場合、モーダルの高さが表示領域内に収まることを意味します。この場合、モーダルの位置を画面中央に設定します。
        calcPosi関数は、初期実行とウィンドウのリサイズ時に呼び出されます。
        $('.isCloseModal, .overlay').on('click', ...)は、モーダルウィンドウを閉じるためのイベントハンドラです。
        モーダルを閉じる際には、isDisplayクラスを削除し、オーバーレイを削除し、モーダルのスタイルをリセットします。
        モーダルを開いた時のスクロール位置に戻すために、window.scrollToを使用します。
        showModalIdを初期化するために、nullを代入しています。
        最後のelseブロックでは、表示対象のIDが存在しない場合にfalseを返しています。
        このソースコードは、モーダルウィンドウを制御するための基本的な機能を提供しています。以下はいくつかの改善点です。
        オーバーレイの生成と表示対象IDの存在チェックを分けることで、オーバーレイが複数回生成されるのを防げます。
        calcPosi関数内での$(showModalId)の複数回の参照を減らすために、変数にキャッシュして再利用することができます。
        スクロール位置の記録と復元は、モーダルウィンドウの開閉に対して適切な位置で行われているように見えますが、ユースケースによっては改善の余地があるかもしれません。
        以上がソースコードのレビューと改善点の提案です。特定の要件や目的に基づいてカスタマイズすることもできますが、現在の情報だけで詳細な改善点を提案するのは難しいです。</p>
    </div>
    <!-- /.container -->


    <div id="test1" class="modal">
      <div class="modal-close isCloseModal">&times;</div>
        <div class="modal-content">
            <p>このコードを使用すると、モーダルウィンドウが中央に表示され、オーバーレイが背景に表示されます。モーダルウィンドウには最大幅が設定されており、四隅には角丸が適用されます。また、モーダルウィンドウには閉じるボタンがあります。ユーザーが閉じるボタンをクリックするか、オーバーレイをクリックするか、Escキーを押すと、モーダルウィンドウが閉じられます。</p>
        </div>
    </div>

    <script
  src="https://code.jquery.com/jquery-1.12.4.min.js"
  integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
  crossorigin="anonymous"></script>

    <script src="./js/main.js"></script>

</body>
</html>